graph LR
    subgraph "Data Sources"
        A[ğŸš Helicopter Telemetry<br/>â€¢ GPS Position<br/>â€¢ Speed & Altitude<br/>â€¢ Engine Metrics]
        B[ğŸŒ¤ï¸ Weather Data<br/>â€¢ Wind Speed<br/>â€¢ Temperature<br/>â€¢ Visibility]
        C[ğŸ Track Conditions<br/>â€¢ Surface Quality<br/>â€¢ Obstacles<br/>â€¢ Safety Zones]
        D[ğŸ“Š Historical Data<br/>â€¢ Past Race Results<br/>â€¢ Pilot Performance<br/>â€¢ Machine Failures]
        E[ğŸ‘¥ Audience Data<br/>â€¢ Social Media<br/>â€¢ Chat Messages<br/>â€¢ Viewing Patterns]
    end
    
    subgraph "Real-time Ingestion"
        F[âš¡ Cloud Pub/Sub<br/>High-throughput Messaging]
        G[ğŸ“¡ IoT Core<br/>Device Management]
        H[ğŸŒ API Gateway<br/>External Data APIs]
    end
    
    subgraph "Stream Processing"
        I[ğŸ”„ Cloud Dataflow<br/>Apache Beam Pipeline]
        J[ğŸ§® Feature Engineering<br/>â€¢ Window Aggregations<br/>â€¢ Statistical Calculations<br/>â€¢ Pattern Recognition]
        K[âš¡ Memorystore Redis<br/>Real-time Cache]
    end
    
    subgraph "AI/ML Engine"
        L[ğŸ¤– Vertex AI Models<br/>Race Outcome Prediction]
        M[ğŸ”§ Machine Failure Model<br/>Anomaly Detection]
        N[ğŸ˜Š Sentiment Analysis<br/>Audience Emotion]
        O[ğŸ¯ Recommendation Engine<br/>Content Optimization]
    end
    
    subgraph "Real-time Outputs"
        P[ğŸ“± Live Predictions<br/>Mobile/Web Apps]
        Q[ğŸ“º Broadcast Overlay<br/>TV Integration]
        R[ğŸš¨ Alert System<br/>Safety Notifications]
        S[ğŸª Dynamic Content<br/>Personalized Experience]
    end
    
    subgraph "Feedback & Learning"
        T[ğŸ“ˆ Model Performance<br/>Monitoring]
        U[ğŸ”„ Continuous Learning<br/>Model Retraining]
        V[ğŸ“Š A/B Testing<br/>Prediction Accuracy]
    end
    
    subgraph "Storage & Analytics"
        W[ğŸ“Š Cloud Bigtable<br/>Time-series Storage]
        X[ğŸ“ˆ BigQuery<br/>Analytics Warehouse]
        Y[ğŸ§  Feature Store<br/>ML Feature Management]
    end
    
    %% Data ingestion flow
    A --> F
    B --> H
    C --> H
    D --> X
    E --> F
    A --> G
    
    %% Processing flow
    F --> I
    G --> I
    H --> I
    I --> J
    J --> K
    
    %% AI/ML predictions
    K --> L
    K --> M
    F --> N
    L --> O
    
    %% Output delivery
    L --> P
    L --> Q
    M --> R
    O --> S
    N --> S
    
    %% Storage
    I --> W
    W --> X
    J --> Y
    
    %% Feedback loops
    P --> T
    Q --> T
    T --> U
    U --> L
    U --> M
    X --> V
    V --> L
    
    %% Real-time cache updates
    L -.-> K
    M -.-> K
    N -.-> K

    style A fill:#e1f5fe
    style F fill:#fff3e0
    style L fill:#e8f5e8
    style P fill:#f3e5f5
    style W fill:#e3f2fd
    style U fill:#fce4ec